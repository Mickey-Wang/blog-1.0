<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>在此处输入标题</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="qimq"><ol class="linenums"><li class="L0"><code class="language-javaScript"><span class="tag">&lt;html</span><span class="pln"> </span><span class="atn">lang</span><span class="pun">=</span><span class="atv">"en"</span><span class="tag">&gt;</span></code></li><li class="L1"><code class="language-javaScript"></code></li><li class="L2"><code class="language-javaScript"><span class="tag">&lt;head&gt;</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;meta</span><span class="pln"> </span><span class="atn">charset</span><span class="pun">=</span><span class="atv">"UTF-8"</span><span class="tag">&gt;</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;title&gt;</span><span class="pln">canvas绘制饼图</span><span class="tag">&lt;/title&gt;</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;script&gt;</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L7"><code class="language-javaScript"><span class="com">     * 绘制饼图</span></code></li><li class="L8"><code class="language-javaScript"><span class="com">     * @param  {array} data_arr  扇形比例的数组</span></code></li><li class="L9"><code class="language-javaScript"><span class="com">     * @param  {array} color_arr 每个扇形的颜色数组</span></code></li><li class="L0"><code class="language-javaScript"><span class="com">     */</span></code></li><li class="L1"><code class="language-javaScript"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> drawCircle</span><span class="pun">(</span><span class="pln">data_arr</span><span class="pun">,</span><span class="pln"> color_arr</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> canvas </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'canvas_circle'</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> ctx </span><span class="pun">=</span><span class="pln"> canvas</span><span class="pun">.</span><span class="pln">getContext</span><span class="pun">(</span><span class="str">'2d'</span><span class="pun">);</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> radius </span><span class="pun">=</span><span class="pln"> canvas</span><span class="pun">.</span><span class="pln">height </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span><span class="pln"> </span><span class="com">//半径</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> ox </span><span class="pun">=</span><span class="pln"> radius </span><span class="pun">+</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">            oy </span><span class="pun">=</span><span class="pln"> radius </span><span class="pun">+</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span><span class="pln"> </span><span class="com">//圆心</span></code></li><li class="L7"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> startAngle </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">//起始弧度</span></code></li><li class="L8"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> endAngle </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> </span><span class="com">//结束弧度</span></code></li><li class="L9"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> color </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L0"><code class="language-javaScript"></code></li><li class="L1"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> time </span><span class="pun">=</span><span class="pln"> </span><span class="lit">200</span><span class="pun">;</span><span class="pln"> </span><span class="com">//毫秒数</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> endTemp </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> angleStep </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pun">;</span></code></li><li class="L4"><code class="language-javaScript"></code></li><li class="L5"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">var</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> data_arr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">            </span><span class="com">//第一个扇形的起始角度</span></code></li><li class="L7"><code class="language-javaScript"><span class="pln">            i </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> startAngle </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="str">""</span><span class="pun">;</span></code></li><li class="L8"><code class="language-javaScript"><span class="pln">            </span><span class="com">//准备画扇形的数据</span></code></li><li class="L9"><code class="language-javaScript"><span class="pln">            endAngle </span><span class="pun">=</span><span class="pln"> startAngle </span><span class="pun">+</span><span class="pln"> data_arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">PI </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln"> </span><span class="com">//结束弧度</span></code></li><li class="L0"><code class="language-javaScript"><span class="pln">            angleStep </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">data_arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">PI </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> time</span><span class="pun">;</span><span class="pln"> </span><span class="com">//画扇形时的增长步长</span></code></li><li class="L1"><code class="language-javaScript"><span class="pln">            color </span><span class="pun">=</span><span class="pln"> color_arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">            </span><span class="com">//开始画扇形</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">            myLoop</span><span class="pun">(</span><span class="pln">startAngle</span><span class="pun">,</span><span class="pln"> endAngle</span><span class="pun">,</span><span class="pln"> ctx</span><span class="pun">,</span><span class="pln"> angleStep</span><span class="pun">,</span><span class="pln"> ox</span><span class="pun">,</span><span class="pln"> oy</span><span class="pun">,</span><span class="pln"> radius</span><span class="pun">,</span><span class="pln"> color</span><span class="pun">);</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">            startAngle </span><span class="pun">=</span><span class="pln"> endAngle</span><span class="pun">;</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-javaScript"></code></li><li class="L8"><code class="language-javaScript"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code class="language-javaScript"><span class="com">     * 通过setInterval画圆</span></code></li><li class="L0"><code class="language-javaScript"><span class="com">     */</span></code></li><li class="L1"><code class="language-javaScript"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> myLoop</span><span class="pun">(</span><span class="pln">startAngle</span><span class="pun">,</span><span class="pln"> endAngle</span><span class="pun">,</span><span class="pln"> ctx</span><span class="pun">,</span><span class="pln"> angleStep</span><span class="pun">,</span><span class="pln"> ox</span><span class="pun">,</span><span class="pln"> oy</span><span class="pun">,</span><span class="pln"> radius</span><span class="pun">,</span><span class="pln"> color</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> endTemp </span><span class="pun">=</span><span class="pln"> startAngle</span><span class="pun">;</span><span class="pln"> </span><span class="com">//画扇形时的动态增长的角度</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> timer </span><span class="pun">=</span><span class="pln"> setInterval</span><span class="pun">(</span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">endTemp </span><span class="pun">&gt;=</span><span class="pln"> endAngle</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">                clearInterval</span><span class="pun">(</span><span class="pln">timer</span><span class="pun">);</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">                </span><span class="kwd">return</span><span class="pun">;</span></code></li><li class="L7"><code class="language-javaScript"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L8"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">fillStyle </span><span class="pun">=</span><span class="pln"> color</span><span class="pun">;</span></code></li><li class="L9"><code class="language-javaScript"><span class="pln">            endTemp </span><span class="pun">+=</span><span class="pln"> angleStep</span><span class="pun">;</span><span class="pln"> </span><span class="com">//使临时结束弧度递增</span></code></li><li class="L0"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">beginPath</span><span class="pun">();</span></code></li><li class="L1"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">moveTo</span><span class="pun">(</span><span class="pln">ox</span><span class="pun">,</span><span class="pln"> oy</span><span class="pun">);</span><span class="pln"> </span><span class="com">//曲线起点设置为圆心</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">arc</span><span class="pun">(</span><span class="pln">ox</span><span class="pun">,</span><span class="pln"> oy</span><span class="pun">,</span><span class="pln"> radius</span><span class="pun">,</span><span class="pln"> startAngle</span><span class="pun">,</span><span class="pln"> endTemp</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">);</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">closePath</span><span class="pun">();</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">            ctx</span><span class="pun">.</span><span class="pln">fill</span><span class="pun">();</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">        </span><span class="pun">},</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-javaScript"></code></li><li class="L8"><code class="language-javaScript"><span class="pln">    </span><span class="com">/**</span></code></li><li class="L9"><code class="language-javaScript"><span class="com">     * 入口初始方法</span></code></li><li class="L0"><code class="language-javaScript"><span class="com">     */</span></code></li><li class="L1"><code class="language-javaScript"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> init</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-javaScript"><span class="pln">        </span><span class="com">//扇形比例数据和颜色</span></code></li><li class="L3"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> data_arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0.3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">];</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">        </span><span class="kwd">var</span><span class="pln"> color_arr </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">"#FF7F00"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#00FFFF"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#FFFF00"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#996633"</span><span class="pun">];</span></code></li><li class="L5"><code class="language-javaScript"></code></li><li class="L6"><code class="language-javaScript"><span class="pln">        drawCircle</span><span class="pun">(</span><span class="pln">data_arr</span><span class="pun">,</span><span class="pln"> color_arr</span><span class="pun">);</span></code></li><li class="L7"><code class="language-javaScript"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="language-javaScript"></code></li><li class="L9"><code class="language-javaScript"><span class="pln">    window</span><span class="pun">.</span><span class="pln">onload </span><span class="pun">=</span><span class="pln"> init</span><span class="pun">;</span></code></li><li class="L0"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;/script&gt;</span></code></li><li class="L1"><code class="language-javaScript"><span class="tag">&lt;/head&gt;</span></code></li><li class="L2"><code class="language-javaScript"></code></li><li class="L3"><code class="language-javaScript"><span class="tag">&lt;body&gt;</span></code></li><li class="L4"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;h3&gt;</span><span class="pln">canvas绘制饼图</span><span class="tag">&lt;/h3&gt;</span></code></li><li class="L5"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;p&gt;</span></code></li><li class="L6"><code class="language-javaScript"><span class="pln">        </span><span class="tag">&lt;canvas</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"canvas_circle"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"500px"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"300px"</span><span class="pln"> </span><span class="atn">style</span><span class="pun">=</span><span class="atv">"</span><span class="pln">border</span><span class="pun">:</span><span class="lit">2px</span><span class="pln"> solid </span><span class="com">#FF7F00</span><span class="atv">"</span><span class="tag">&gt;</span></code></li><li class="L7"><code class="language-javaScript"><span class="pln">            您的浏览器不支持canvas</span></code></li><li class="L8"><code class="language-javaScript"><span class="pln">        </span><span class="tag">&lt;/canvas&gt;</span></code></li><li class="L9"><code class="language-javaScript"><span class="pln">    </span><span class="tag">&lt;/p&gt;</span></code></li><li class="L0"><code class="language-javaScript"><span class="tag">&lt;/body&gt;</span></code></li><li class="L1"><code class="language-javaScript"></code></li><li class="L2"><code class="language-javaScript"><span class="tag">&lt;/html&gt;</span></code></li></ol></pre></div>
</body>
</html>